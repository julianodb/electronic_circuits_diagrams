\documentclass[convert]{standalone}
\usepackage[americancurrents]{circuitikz}
\begin{document}
\begin{circuitikz}
\ctikzset{resistors/scale=0.8, capacitors/scale=0.7}
\draw 
(0,0) 
node[above]{$v_o$}
to[short, o-] ++(1,0) node[op amp, anchor=+, noinv input up](OPAMP){}
(OPAMP.out) to[Do] ++(2,0) coordinate(A1)
-- ++(1.5,0) coordinate(A2)
to[short, *-] ++(1,0) coordinate(envelope)
(A2) to[C=$C_{11}$] ++(0,-2) node[ground]{}
(A1) to[R, l_=$R_{11}$, *-] ++(0,-2) coordinate(A3)
to[R, l_=$R_{12}$, *-] ++(0,-2) node[ground]{}
(OPAMP.-) -- ++(-0.5,0) |- (A3)

(envelope) -- ++(4.5,0)
node[op amp, anchor=-](OA){} 
(OA.up) --++(0,0.2) node[vcc]{$V_{CC}$}
(OA.down) --++(0,-0.2) node[vee]{$V_{EE}$}
(OA.+) node[anchor=north east]{$V_{umbral}$}
-| ++(-1.8,-0.8)
-- ++(-0.5,0)
node[potentiometershape, rotate=-90,  anchor=wiper](POT){} 
(POT.right) node[ground]{}
(POT.left) node[vcc]{$V_{CC}$}
(POT.270) node[left]{$R_{pot2}$}

(OA.out)
to[C, l_=$C_{12}$, -*] ++(2,0)
to[R=$R_{13}$] ++(0,1.5) node[vcc]{$V_{CC}$}
++(0,-1.5) to[short] ++(1,0) 

|- ++(-1,-3)
coordinate(rect)
++(-1.5,0)
node[above]{pendiente}
node[below]{(T6 y T8)}
++(-1.5,0)
-| ++(-7,-6)

to[R=$R_{19}$] ++(2,0) coordinate(R1)
to[R=$R_{20}$, *-*] ++(2,0) coordinate(R2)
--++(1,0)
node[op amp, anchor=+, noinv input up](OPAMP){}
(R2) to[C, l_=$C_{15}$] ++(0,-2) node[ground]{}
(OPAMP.out) coordinate(VO)
to[short, *-] ++(0,-1.5)
-| (OPAMP.-)
(R1) --++(0,1.5) 
--++(0.5,0) coordinate(C1)
to[C=$C_{14}$] (VO |- C1)
--++(0.5,0) coordinate(C1X)
to[short,-*] (C1X |- VO)
(C1) ++(-0.5,0) to[short,*-] ++(0,1.5)
--++(0.5,0) coordinate(C1b)
to[C=$C_{14}$] (VO |- C1b)
--++(0.5,0) coordinate(C1bX)
to[short,-*] (C1bX |- C1X)
(VO)
-- ++(1.3,0) node[above]{HR}
-- ++(0.7,0)
++(0,-1) rectangle ++(2,2)
++(-1,-1) node{display}
++(0,1) node[vcc]{$V_{CC}$}
++(0,-2) node[vee]{$V_{EE}$}


(2,-6) 
node[vcc]{$V_{CC}$}
to[R={$R_{22}$}] ++(0,-2)
to[leDo] ++(0,-2)
node[vee]{$V_{EE}$}
;

\draw[dashed]
(rect) ++(0,-1) 
rectangle ++(-3,2)
;
\draw[blue, dashed] 
(-0.5,1)
-- ++(8.5,0)
-- ++(0,-4.5)
-- ++(-2,0)
-- ++(0,-2)
-- ++(-1.8,0)
-- ++(0,2.5)
-- ++(-4.7,0)
++(2.5,-0.1) node[below]{Detector de envolvente}
++(-2.5,0.1)
--(-0.5,1)

(8.2,1.8) rectangle (18,-6)
(13.2,-5.9) node[above]{Generador de pulso}

(15,-6.2) rectangle (6.5,-12.8)
(6.4,-9.5) node[left]{Filtro 2}
;
\end{circuitikz}
\end{document}
